<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="horizontal" xmlns:demo="demo.*"
    creationComplete="initApp();"
    >
<mx:Style source="main.css" />
<mx:Script>
    <![CDATA[
        import mx.events.DynamicEvent;
        import cn.com.ultrapower.topology.view.Node;
        
        private function initApp():void
        {
            topoApp.setData(xml1);
        }
        
        private function dbClickHandler(evt:DynamicEvent):void
        {
            /**
             * 读取数据
             */
            trace("== node name ==", (evt.node as Node).Name);
            topoApp.setData(xml2);
        }
        
        private var xml1:XML = 
        <topology>
            <id>4587</id>
            <name>拓扑组件 Demo</name>
            <background>..</background>
            <node id="root" title="工作组" type="workgroup" describe="根节点工作组" x="501.00" y="132.00"/>
            <node id="node1" title="服务器" type="server" describe="工作组中某台服务器" x="72.00" y="181.00"/>
            <node id="node2" title="客户端" type="client" describe="某客户端" x="655.00" y="243.00"/>
            <node id="node3" title="电脑设备" type="computer" describe="典型设备连接外设" x="384.00" y="332.00"/>
            <node id="node4" title="打印机" type="printer" describe="连接到电脑上的打印机" x="316.00" y="528.00"/>
            <node id="node5" title="存储" type="storage" x="238.00" describe="存储设备, 如硬盘" y="456.00"/>
            <node id="node6" title="音频" type="audio" x="490.00" describe="" y="515.00"/>
            <node id="node7" title="视频" type="video" x="613.00" describe="" y="453.00"/>
            <line fromId="root" toId="node1" color="ff0000" width="1" arrowType="1" arrowMode="0"/>
            <line fromId="root" toId="node2" color="330066" width="2" arrowType="0" arrowMode="0"/>
            <line fromId="node1" toId="node3" color="0" width="1" arrowMode="0" arrowType="0"/>
            <line fromId="node3" toId="node4" color="ff00ff" width="1" arrowMode="0" arrowType="0"/>
            <line fromId="node3" toId="node5" color="ff" width="1" arrowType="0" arrowMode="0"/>
            <line fromId="node3" toId="node6" color="ffff" width="1" arrowType="0" arrowMode="0"/>
            <line fromId="node3" toId="node7" color="8000" width="1" arrowType="1" arrowMode="0"/>
        </topology>
        
        private var xml2:XML = 
        <topology>
          <node id="root" title="工作组" type="workgroup" describe="根节点工作组" x="501" y="132"/>
          <node id="node1" title="服务器" type="server" describe="工作组中某台服务器" x="377" y="226"/>
          <node id="node2" title="客户端" type="client" describe="某客户端" x="655" y="243"/>
          <node id="node3" title="电脑设备" type="computer" describe="典型设备连接外设" x="384" y="332"/>
          <node id="node4" title="打印机" type="printer" describe="连接到电脑上的打印机" x="316" y="528"/>
          <node id="node5" title="存储" type="storage" x="238" describe="存储设备, 如硬盘" y="456"/>
          <node id="node6" title="音频" type="audio" x="490" describe="" y="515"/>
          <node id="node7" title="视频" type="video" x="613" describe="" y="453"/>
          
          <node id="node991" title="无关系节点1" type="power" x="100" describe="" y="50"/>
          <node id="node992" title="无关系节点2" type="wifi" x="200" describe="" y="50"/>
          <node id="node993" title="无关系节点3" type="hardware" x="300" describe="" y="50"/>
          
          <line fromId="root" toId="node1" color="ff0000"/>
          <line fromId="root" toId="node2" color="330066"/>
          <line fromId="node1" toId="node3" color="000000"/>
          <line fromId="node3" toId="node4" color="ff00ff"/>
          <line fromId="node3" toId="node5" color="0000ff"/>
          <line fromId="node3" toId="node6" color="00ffff"/>
          <line fromId="node3" toId="node7" color="008000"/>
          
          <line fromId="node991" toId="node992" />
        </topology>
    ]]>
</mx:Script>
    <mx:Button label="save" click="trace(topoApp.getData());" />
    <demo:TopologyApp id="topoApp" width="100%" height="100%" dbClick="dbClickHandler(event);" />
</mx:Application>
